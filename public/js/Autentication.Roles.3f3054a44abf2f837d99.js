(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{JIvn:function(t,e,n){"use strict";n.r(e);var o=n("L2JU"),s={props:{id:{type:String,required:!0},settings:{type:Object,required:!0},collection:{}},data:function(){return{select2:null,defaultSettings:{mount:!1,id:"select2-component",multiple:!1,theme:"bootstrap",language:"es",closeOnSelect:!0,ajax:null,minimumInputLength:0,templateResult:null,templateSelection:null,initSelection:null}}},watch:{"settings.mount":function(t){this.defaultSettings.mount=t,t&&this.mountComponent()}},methods:{mountComponent:function(){var t=Object.assign(this.defaultSettings,this.settings);$("select#".concat(this.id)).select2(t),$("select#".concat(this.id)).on("select2:unselect",this.settings.unselect)}}},r=n("KHd+");function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,s=function(){};return{s:s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw r}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={components:{Select2Component:Object(r.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("select",{attrs:{id:this.id,multiple:this.defaultSettings.multiple}})}),[],!1,null,null,null).exports},computed:c(c({},Object(o.c)({updateMode:"roles/form/getUpdateMode",role:"roles/form/getRole",select2Settings:"roles/form/getSelect2Settings",selectedPermissions:"roles/form/getSelectedPermissions"})),{},{title:function(){return this.updateMode?"ACTUALIZAR ROLE":"REGISTRAR ROLE"},classButton:function(){return this.updateMode?"btn btn-success":"btn btn-primary"},textButton:function(){return this.updateMode?"Actualizar":"Guardar"}}),watch:{selectedPermissions:function(t){var e=this.select2Settings.id;if($("select#".concat(e)).val(null).trigger("change"),Array.isArray(t)&&t.length){var n,o=a(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,r=new Option(s.name,s.id,!0,!0);$("select#".concat(e)).append(r).trigger("change")}}catch(t){o.e(t)}finally{o.f()}}}},methods:c(c(c({},Object(o.d)({setSelect2Settings:"roles/form/setSelect2Settings"})),Object(o.b)({submitRoleForm:"roles/form/submitRoleForm"})),{},{mountSelect2:function(){var t=this,e={mount:!0,templateSelection:function(e){return void 0!==e.id&&""!==e.id?(t.role.permissions.includes(e.id)||t.role.permissions.push(e.id),e.name||e.text):"Seleccione los permisos para el rol"},unselect:function(e){t.role.permissions.splice(t.role.permissions.indexOf(e.params.data.id),1)}};this.setSelect2Settings(e)}}),mounted:function(){this.mountSelect2()}};function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={components:{RoleForm:Object(r.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade show",attrs:{id:"modal-role-form","aria-modal":"true",role:"dialog"}},[n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h4",{staticClass:"modal-title"},[t._v(t._s(t.title))]),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"modal-body"},[n("form",{attrs:{id:"role-form"},on:{submit:function(e){return e.preventDefault(),t.submitRoleForm()}}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Nombre")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.role.name,expression:"role.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"modulo_permiso",dusk:"role-name",pattern:"[\\w\\s]{5,}",title:"El nombre debe contener al menos 5 caracteres",required:""},domProps:{value:t.role.name},on:{input:function(e){e.target.composing||t.$set(t.role,"name",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Descripcion")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.role.description,expression:"role.description"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"Descripcion...",pattern:"[\\w\\s]{5,}",title:"La descripcion debe contener al menos 5 caracteres",dusk:"role-description"},domProps:{value:t.role.description},on:{input:function(e){e.target.composing||t.$set(t.role,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Permisos")]),t._v(" "),n("Select2Component",{attrs:{id:t.select2Settings.id,settings:t.select2Settings,collection:t.role.permissions}})],1)])]),t._v(" "),n("div",{staticClass:"modal-footer justify-content-between"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cerrar")]),t._v(" "),n("button",{class:t.classButton,attrs:{type:"submit",form:"role-form",dusk:"btn-manage-role"}},[t._v("\n                    "+t._s(t.textButton)+"\n                ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports,DatatableComponent:n("kdEM").a},computed:p({},Object(o.c)({roles:"roles/getRoles",datatable:"roles/getDatatable",datatableSettings:"roles/getDatatableSettings"})),methods:p(p(p({},Object(o.d)({setRoles:"roles/setRoles",setDatatable:"roles/setDatatable",setDatatableSettings:"roles/setDatatableSettings",setUpdateMode:"roles/form/setUpdateMode",setRole:"roles/form/setRole",setSelectedPermissions:"roles/form/setSelectedPermissions"})),Object(o.b)({ajaxReloadDatatable:"roles/ajaxReloadDatatable"})),{},{getUpdatedListOfRoles:function(){return this.roles},openRoleForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.setUpdateMode(t),e){var n=Object.assign({},e),o=n.permissions;n.permissions=[],this.setRole(n),this.setSelectedPermissions(o)}this.openModal("div#modal-role-form")},openRoleUpdateForm:function(t){this.openRoleForm(!0,t)},openSwalWindowDeleteRole:function(t){var e=this;console.log(t),Swal.fire({text:"¿Está realmente seguro de eliminar el permiso ".concat(t.name,"?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Si, eliminarlo!",cancelButtonText:"Cancelar"}).then((function(n){var o=e.setInterceptorAxios("Eliminando el permiso, espere un momento");axios.delete("/roles/".concat(t.id)).then((function(t){e.ajaxReloadDatatable(),Swal.fire({title:"El permiso se elimino correctamente de la base de datos.",icon:"success"})})).catch((function(t){return e.showErrorHttpAxios(t)})),e.ejectInterceptorAxios(o)}))},mountDatatable:function(){var t=this,e={mount:!0,ajax:{url:"/roles",dataSrc:function(e){var n=e.data;return t.setRoles(n),n}}};this.setDatatableSettings(e)},datatableMounted:function(t){this.setDatatable(t),this.setDatatableSettings({mount:!1}),this.listenButtonWithinDatatable(".btn-role-update",this.getUpdatedListOfRoles,this.openRoleUpdateForm),this.listenButtonWithinDatatable(".btn-role-delete",this.getUpdatedListOfRoles,this.openSwalWindowDeleteRole)}}),mounted:function(){this.mountDatatable()}},v=Object(r.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"card card-primary card-outline"},[n("div",{staticClass:"card-header"},[n("div",{staticClass:"d-flex justify-content-between"},[n("h5",{staticClass:"m-0"},[t._v("Listado de Roles")]),t._v(" "),n("div",[n("button",{staticClass:"btn btn-primary",attrs:{dusk:"btn-role-form"},on:{click:function(e){return t.openRoleForm()}}},[n("i",{staticClass:"fa fa-plus"}),t._v(" Role\n                                    ")])])])]),t._v(" "),n("div",{staticClass:"card-body"},[n("DatatableComponent",{attrs:{id:t.datatableSettings.id,settings:t.datatableSettings},on:{datatableMounted:function(e){return t.datatableMounted(e)}},scopedSlots:t._u([{key:"header",fn:function(){return[n("tr",[n("th",[t._v("Id")]),t._v(" "),n("th",[t._v("Opciones")]),t._v(" "),n("th",[t._v("Nombre")]),t._v(" "),n("th",[t._v("Description")]),t._v(" "),n("th",[t._v("Permisos")]),t._v(" "),n("th",[t._v("Fecha de creación")])])]},proxy:!0},{key:"footer",fn:function(){return[n("tr",[n("th",[t._v("Id")]),t._v(" "),n("th",[t._v("Opciones")]),t._v(" "),n("th",[t._v("Nombre")]),t._v(" "),n("th",[t._v("Description")]),t._v(" "),n("th",[t._v("Permisos")]),t._v(" "),n("th",[t._v("Fecha de creación")])])]},proxy:!0}])})],1)])])])])]),t._v(" "),n("RoleForm")],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-header"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-6"},[e("h1",{staticClass:"m-0"},[this._v("Roles")])]),this._v(" "),e("div",{staticClass:"col-sm-6"},[e("ol",{staticClass:"breadcrumb float-sm-right"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"/authentication"}},[this._v("Autenticacion")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item active"},[this._v("Roles")])])])])])])}],!1,null,null,null);e.default=v.exports},"KHd+":function(t,e,n){"use strict";function o(t,e,n,o,s,r,a,i){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):s&&(l=i?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}n.d(e,"a",(function(){return o}))},kdEM:function(t,e,n){"use strict";var o={props:{id:{type:String,required:!0},settings:{type:Object,required:!0}},data:function(){return{defaultSettings:{mount:!1,fixedHeader:!0,processing:!0,serverSide:!0,ajax:{},columns:[],responsive:{orthogonal:"responsive"},language:{decimal:",",emptyTable:"Ningún dato disponible en esta tabla",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",infoPostFix:"",thousands:".",lengthMenu:"Mostrar _MENU_ registros",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"No se encontraron resultados",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"}}}}},watch:{"settings.mount":function(t){this.defaultSettings.mount=t,t&&this.mountComponent()}},methods:{mountComponent:function(){var t=Object.assign(this.defaultSettings,this.settings),e=$("table#".concat(this.id)).DataTable(t);this.$emit("datatableMounted",e)}}},s=n("KHd+"),r=Object(s.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"table table-bordered table-hover",attrs:{id:this.id}},[e("thead",[this._t("header")],2),this._v(" "),e("tfoot",[this._t("footer")],2)])}),[],!1,null,null,null);e.a=r.exports}}]);