(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"6lVQ":function(t,e,s){"use strict";s("kluA")},"8s/l":function(t,e,s){(e=t.exports=s("I1BE")(!1)).i(s("C1MV"),""),e.i(s("snQs"),""),e.push([t.i,"",""])},JIvn:function(t,e,s){"use strict";s.r(e);var r=s("L2JU");function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}window.select2=s("DjPg"),s("qQBl");var i={data:function(){return{select2:{multiple:!0}}},computed:a(a({},Object(r.c)({updateMode:"roles/form/getUpdateMode",role:"roles/form/getRole"})),{},{title:function(){return this.updateMode?"ACTUALIZAR ROLE":"REGISTRAR ROLE"},classButton:function(){return this.updateMode?"btn btn-success":"btn btn-primary"},textButton:function(){return this.updateMode?"Actualizar":"Guardar"}}),methods:a(a({},Object(r.b)({submitRoleForm:"roles/form/submitRoleForm"})),{},{cargarSelect2MultiplePermisos:function(){var t=this;setTimeout((function(){$("select#role-permissions").select2({theme:"bootstrap",language:"es",multiple:!0,closeOnSelect:!1,ajax:{url:"/permissions/select2",dataType:"JSON",delay:50,data:function(t){return{search:t.term}},processResults:function(t){return{results:t.permissions}},cache:!0},minimumInputLength:0,templateResult:function(t){return void 0!==t.id&&""!==t.id?t.name:"Buscando..."},templateSelection:function(e){return void 0!==e.id&&""!==e.id?(t.role.permissions.includes(e.id)||t.role.permissions.push(e.id),e.name):"Seleccione los permisos para el rol"}}),$("select#role-permissions").on("select2:unselect",(function(e){var s=e.params.data.id;t.role.permissions.splice(t.role.permissions.indexOf(s),1)}))}),500)}}),mounted:function(){this.cargarSelect2MultiplePermisos()}},l=(s("6lVQ"),s("KHd+"));function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){u(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var m={components:{RoleForm:Object(l.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade show",attrs:{id:"modal-role-form","aria-modal":"true",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h4",{staticClass:"modal-title"},[t._v(t._s(t.title))]),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"modal-body"},[s("form",{attrs:{id:"role-form"},on:{submit:function(e){return e.preventDefault(),t.submitRoleForm()}}},[s("div",{staticClass:"form-group"},[s("label",[t._v("Nombre")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.role.name,expression:"role.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"modulo_permiso",dusk:"role-name",pattern:"[\\w\\s]{5,}",title:"El nombre debe contener al menos 5 caracteres",required:""},domProps:{value:t.role.name},on:{input:function(e){e.target.composing||t.$set(t.role,"name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Descripcion")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.role.description,expression:"role.description"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"Descripcion...",pattern:"[\\w\\s]{5,}",title:"La descripcion debe contener al menos 5 caracteres",dusk:"role-description"},domProps:{value:t.role.description},on:{input:function(e){e.target.composing||t.$set(t.role,"description",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Permisos")]),t._v(" "),s("select",{attrs:{id:"role-permissions",multiple:t.select2.multiple}})])])]),t._v(" "),s("div",{staticClass:"modal-footer justify-content-between"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cerrar")]),t._v(" "),s("button",{class:t.classButton,attrs:{type:"submit",form:"role-form",dusk:"btn-manage-role"}},[t._v("\n                    "+t._s(t.textButton)+"\n                ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},computed:d({},Object(r.c)({roles:"roles/getRoles",datatable:"roles/getDatatable",datatableSettings:"roles/getDatatableSettings"})),methods:d(d(d({},Object(r.d)({setRoles:"roles/setRoles",setDatatable:"roles/setDatatable",setDatatableSettings:"roles/setDatatableSettings",setUpdateMode:"roles/form/setUpdateMode",setPermission:"roles/form/setPermission"})),Object(r.b)({ajaxReloadDatatable:"roles/ajaxReloadDatatable"})),{},{getUpdatedListOfRoles:function(){return this.roles},openRoleForm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setUpdateMode(t),e&&this.setPermission(e),this.openModal("div#modal-role-form")},loadDatatableSettings:function(){var t=this;return{ajax:{url:"/roles",dataSrc:function(e){var s=e.data;return t.setRoles(s),s}},columns:[{data:"id"},{data:"id",render:function(t){return'\n                            <div class="w-100 text-center">\n                                <div class="btn-group">\n                                    <button class="btn btn-sm btn-primary btn-roles-update" data-id="'.concat(t,'">\n                                        <i class="fas fa-edit"></i>\n                                    </button>\n                                    <button class="btn btn-sm btn-danger btn-roles-delete" data-id="').concat(t,'">\n                                        <i class="fas fa-trash"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        ')}},{data:"name"},{data:"description"},{data:"created_at",render:function(t){return moment(t).format("YYYY-MM-DD hh:mm:ss A")}}]}},openPermissionUpdateForm:function(t){this.openRoleForm(!0,t)},openSwalWindowDeletePermission:function(t){var e=this;console.log(t),Swal.fire({text:"¿Está realmente seguro de eliminar el permiso ".concat(t.name,"?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Si, eliminarlo!",cancelButtonText:"Cancelar"}).then((function(s){var r=e.setInterceptorAxios("Eliminando el permiso, espere un momento");axios.delete("/roles/".concat(t.id)).then((function(t){e.ajaxReloadDatatable(),Swal.fire({title:"El permiso se elimino correctamente de la base de datos.",icon:"success"})})).catch((function(t){return e.showErrorHttpAxios(t)})),e.ejectInterceptorAxios(r)}))}}),mounted:function(){}},p=Object(l.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card card-primary card-outline"},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"d-flex justify-content-between"},[s("h5",{staticClass:"m-0"},[t._v("Listado de Roles")]),t._v(" "),s("div",[s("button",{staticClass:"btn btn-primary",attrs:{dusk:"btn-role-form"},on:{click:function(e){return t.openRoleForm()}}},[s("i",{staticClass:"fa fa-plus"}),t._v(" Role\n                                    ")])])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("table",{staticClass:"table table-bordered table-hover",attrs:{id:"table-roles-list"}},[t._m(1),t._v(" "),s("tbody",t._l(t.roles,(function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td"),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.description))]),t._v(" "),s("td",[t._v(t._s(e.permissions.map((function(t){return t.name})).join(", ")))]),t._v(" "),s("td",[t._v(t._s(e.created_at))])])})),0),t._v(" "),t._m(2)])])])])])])]),t._v(" "),s("RoleForm")],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-header"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-6"},[e("h1",{staticClass:"m-0"},[this._v("Roles")])]),this._v(" "),e("div",{staticClass:"col-sm-6"},[e("ol",{staticClass:"breadcrumb float-sm-right"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"/authentication"}},[this._v("Autenticacion")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item active"},[this._v("Roles")])])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Id")]),t._v(" "),s("th",[t._v("Opciones")]),t._v(" "),s("th",[t._v("Nombre")]),t._v(" "),s("th",[t._v("Description")]),t._v(" "),s("th",[t._v("Permisos")]),t._v(" "),s("th",[t._v("Fecha de creación")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tfoot",[s("tr",[s("th",[t._v("Id")]),t._v(" "),s("th",[t._v("Opciones")]),t._v(" "),s("th",[t._v("Nombre")]),t._v(" "),s("th",[t._v("Description")]),t._v(" "),s("th",[t._v("Permisos")]),t._v(" "),s("th",[t._v("Fecha de creación")])])])}],!1,null,null,null);e.default=p.exports},kluA:function(t,e,s){var r=s("8s/l");"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(r,o);r.locals&&(t.exports=r.locals)}}]);